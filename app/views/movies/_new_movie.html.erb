<%= form_for movie do |f| %>
<table>
  <tr>
    <td><%= f.label :title%></td>
    <td><%= f.text_field :title%></td>
  </tr>
<tr>


  <%= f.fields_for :genre do |genre_attributes|%>
  <td><%= genre_attributes.label :id, "Genre"%></td>
  <td><%=  genre_attributes.collection_select :id, @genres,:id,:name, include_blank: true %></td>
<td>Or create a new genre:</td>

      <%= genre_attributes.label :name, "Genre Name:" %><td>
      <%= genre_attributes.text_field :name %>
  <% end %></td>
</tr>
<tr>
  <td><%= f.label :director%></td>
  <td><%=  f.collection_select :director_id, Person.order(:name),:id,:name, include_blank: true %></td>
  <td>Or create a new director:</td>
    <%= f.fields_for :director, movie.build_director do |director_attributes|%>
        <td><%= director_attributes.label :name, "Name:" %></td><td>
        <%= director_attributes.text_field :name %>
    </td><td><%= director_attributes.label :dob, "DOB:" %></td><td>
    <%= director_attributes.date_field :dob %>
</td>
  <% end %>
</tr>
<tr>
  <td><%= f.label :writer%></td>
  <td><%= f.collection_select :writer_id, Person.order(:name),:id,:name, include_blank: true %></td>
  <td>Or create a new writer:</td>
    <%= f.fields_for :writer, movie.build_writer do |writer_attributes|%>
        <td><%= writer_attributes.label :name, "Name:" %></td><td>
        <%= writer_attributes.text_field :name %>
    </td><td><%= writer_attributes.label :dob, "DOB:" %></td><td>
    <%= writer_attributes.date_field :dob %>
</td>
    <% end %>
</tr>
<tr>
  <td><%= f.label :release_date%></td>
  <td><%= f.number_field :release_date%>
</td>
</tr>
<tr>
<td><%= f.submit %></td>
</tr>
</table>
<% end %>
